---
import Layout from '../layouts/Layout.astro';
import ProjectCard from '../components/ProjectCard.astro';
import Portfolio from '../components/Portfolio.astro'
import Landing from '../components/Landing.astro';
import Loading from '../components/Loading.astro';
import Skills from '../components/Skills.astro';
import About from '../components/About.astro';
import Sidebar from '../components/Sidebar.astro';

import projects from '../data/projects.json'
---

<Layout>
	<Loading/>
	<main id="main-content" class="m-0 p-0 w-auto text-xl">
		<Sidebar/>
		<Landing />
		<Portfolio />
		
		<!-- render project cards -->
		<div class="grid-container mx-auto mb-12">
			{projects.map((project) => 
				( <ProjectCard 
					title={ project.title }
					description= { project.description }
					link={project.link}
					status={ project.status }
					icons={ project.icons }
					button={ project.button }
					style={ project.style }
				/><hr class="border-1 border-slate-800"/>))
				}
		</div>

		<Skills/>
		<About/>
	</main>
</Layout>

<style>
	main {
		line-height: 1.6;
	}

	/* style projects grid */
	.grid-container {
		width: 50%;
		display: grid;
		grid-template-columns: repeat(1, 1fr);
	}

	.grid-container hr:last-child {
		display: none;
	}

	@media  screen and (max-width: 770px) {
      .grid-container {
        width: 80%;
      }     
    }

	#main-content {
		opacity: 0; /* Initially hide the main content */
        transition: opacity 0.5s ease-in-out;
	}
</style>

<script>
	// Smooth scroll function
	document.querySelectorAll('a[href^="#"]').forEach(anchor => {
		anchor.addEventListener('click', function (e) {
			e.preventDefault();
			document.querySelector(this.getAttribute('href')).scrollIntoView({
				behavior: 'smooth',
			});
		});
	});

	window.addEventListener("load", function () {
        document.getElementById("loading-screen").style.opacity = "0";
        document.getElementById("main-content").style.opacity = "100";

	setTimeout(function () {
		document.getElementById("loading-screen").style.display = "none";
    }, 200); 
});
</script>